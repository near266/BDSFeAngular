<div class="container">
  <div class="grid p-3">
    <div class="col-12 md:col-10">
      <div class="title-content">
        <label>DANH SÁCH BÀI ĐĂNG </label>
        <span>(3103 bài đăng)</span>
      </div>
    </div>
  </div>
  <div class="grid p-3 border-line">
    <div class="field col-12 md:col-4">
      <div class="title">
        <label>Trạng thái</label>
      </div>
      <p-dropdown [options]="listStatus" [(ngModel)]="listRequest.status" optionValue="code"></p-dropdown>
    </div>
    <div class="field col-12 md:col-6">
      <div class="title">
        <label *ngIf="!isBuy">Tin tìm bán đất</label>
        <label *ngIf="isBuy">Tin tìm mua đất</label>
      </div>
      <input type="text" pInputText [(ngModel)]="listRequest.title">
    </div>
    <div class="col-12 md:col-2">
      <button pButton label="Tìm kiếm" icon="pi pi-search" (click)="getListPost()"></button>
    </div>
  </div>
  <div class="grid p-3 mt-2">
    <div class="mr-2">
      <button pButton label="Duyệt" [disabled]="!(dataSelection.length > 1)"
              icon="pi pi-check" class="p-button-outlined" (click)="approveAll()"></button>
    </div>
    <div class="mr-2">
      <button pButton label="Từ chối" [disabled]="!(dataSelection.length > 1)"
              icon="pi pi-times" class="p-button-outlined p-button-warning"
              (click)="rejectAll()"></button>
    </div>
  </div>
  <div class="p-3" style="overflow: auto">
    <p-table [value]="data" [(selection)]="dataSelection"
             dataKey="id"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 4rem">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th>
          <th>Mã tin</th>
          <th>Loại bài</th>
          <th class="text-center">Tiêu đề</th>
          <th>Người đăng</th>
          <th>Trạng thái</th>
          <th>Created Date</th>
          <th>Last Updated</th>
          <th class="text-center">Thao tác</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>
            <p-tableCheckbox [value]="product"></p-tableCheckbox>
          </td>
          <td>{{ product.id }}</td>
          <td>{{ product.type }}</td>
          <td><span class="hyper-link" (click)="goToView(product.id)">{{ product.titile }}</span></td>
          <td>{{ product.createdBy }}</td>
          <td>
            <span
              [ngClass]="'new-status-' + product.status">{{ 'status.' + product.status | translate}}</span>
          </td>
          <td>{{ product.createdDate | date: 'dd/MM/yyyy' }}</td>
          <td>{{ product.dueDate | date: 'dd/MM/yyyy' }}</td>
          <td>
            <div class="flex">
              <button pButton (click)="delete(product.id)" icon="pi pi-trash" pTooltip="Xóa"
                      class="p-button-sm p-button-danger p-button-outlined mr-2"></button>
              <button pButton (click)="reject(product.id)" icon="pi pi-times" pTooltip="Từ chối"
                      [disabled]="product.status === 2 || listDoNotAction.includes(product.status)"
                      class="p-button-sm p-button-warning p-button-outlined mr-2"></button>
              <button pButton (click)="approve()" icon="pi pi-check" pTooltip="Duyệt"
                      [disabled]="product.status === 1 || listDoNotAction.includes(product.status)"
                      class="p-button-sm p-button-primary p-button-outlined mr-2"></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="grid p-3">
    <p-paginator [rows]="pageSize" [totalRecords]="totalRecord" [rowsPerPageOptions]="[10,20,30]"
                 [showCurrentPageReport]="true" (onPageChange)="paginate($event)"
                 #paginator
                 currentPageReportTemplate=
                   "{currentPage} of {totalPages}"></p-paginator>
  </div>
</div>
<p-dialog [(visible)]="isShowModalApprove" [modal]="true" [draggable]="false"
          [resizable]="false" header="Duyệt nhiều">
  <div class="">
    <p-table [value]="dataSelection"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Mã tin</th>
          <th>Loại bài</th>
          <th>Tiêu đề</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>{{ product.id }}</td>
          <td>{{ product.type }}</td>
          <td>{{ product.titile }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="flex mt-2 justify-content-center">
    <button pButton label="Duyệt" (click)="doChangeAction(1)"></button>
  </div>
</p-dialog>
<p-dialog [(visible)]="isShowModalReject" [modal]="true" [draggable]="false"
          [resizable]="false" header="Từ chối nhiều">
  <div class="">
    <p-table [value]="dataSelection"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Mã tin</th>
          <th>Loại bài</th>
          <th>Tiêu đề</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>{{ product.id }}</td>
          <td>{{ product.type }}</td>
          <td>{{ product.titile }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="">
    <div class="primary-form-control">
      <label for="">Lí do</label>
      <textarea pInputTextarea [(ngModel)]="reason"></textarea>

    </div>
  </div>
  <div class="flex mt-2 justify-content-center">
    <button pButton label="Từ chối" (click)="doChangeAction(2)"
            class="p-button-outlined p-button-warning"></button>
  </div>
</p-dialog>
<p-dialog [(visible)]="isShowRejectReason" [modal]="true" [draggable]="false" [resizable]="false"
          header="Lí do tử chối" [style]="{width: '35vw'}">
  <div class="">
    Bạn chắc chắn muốn từ chối bản ghi
  </div>
  <div class="">
    <div class="primary-form-control">
      <label for="">Lí do</label>
      <textarea pInputTextarea [(ngModel)]="reasonOne"></textarea>
    </div>
  </div>
  <div class="flex mt-2 justify-content-center">
    <button pButton label="Từ chối" (click)="doReject()" class="p-button-outlined p-button-warning"></button>
  </div>
</p-dialog>
